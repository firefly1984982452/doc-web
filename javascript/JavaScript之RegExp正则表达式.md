---
title: JavaScriptä¹‹RegExpæ­£åˆ™è¡¨è¾¾å¼
date: 2020-12-23 14:44:34
categories:
- program
---

[å­¦ä¹ é“¾æ¥-å»–é›ªå³°](https://www.liaoxuefeng.com/wiki/1022910821149312/1023021582119488)

[å­¦ä¹ é“¾æ¥-èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/regexp/regexp-syntax.html)

---

# ä¸€ã€æ–°å»º

```
var re1 = /ABC\-001/;
var re2 = new RegExp('ABC\\-001');

re1; // /ABC\-001/
re2; // /ABC\-001/
```

re2 è½¬ä¹‰ï¼Œ2 ä¸ª`\\`ä¼šå˜æˆ 1 ä¸ª`\`ã€‚

`new RegExp('a','g')`ç­‰åŒäº`/a/g`

---

# äºŒã€ä½¿ç”¨

## ã€1ã€‘test

`/\d/.test(3)`; // true

## ã€2ã€‘exec

**ä½¿ç”¨**

`/\d/.exec('3e')`; // ["3", index: 0, input: "3e", groups: undefined]

**éå…¨å±€æ¨¡å¼**

```
var str = "1a1b1c";
var reg = /1./;
reg.exec(str)[0]; // "1a"
reg.exec(str)[0]; // "1a"
```

**å…¨å±€æ¨¡å¼**

```
var str = "1a1b1c";
var reg = /1./g;
reg.exec(str)[0]; // "1a"
reg.exec(str)[0]; // "1b"
```

ä¾æ¬¡è¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼ã€‚

## ã€3ã€‘match

**ä½¿ç”¨**

`'3e'.match(/\d/)`; // ["3", index: 0, input: "3e", groups: undefined]

**éå…¨å±€æ¨¡å¼**

```
var str = "1a1b1c";
var reg = /1./;
str.match(reg); // ['1a']
str.match(reg); // ['1a']
```

**å…¨å±€æ¨¡å¼**

```
'1a1b1c'.match(/1./g); // ["1a", "1b", "1c"]
```

ä¸€æ¬¡è¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼ã€‚

---

# ä¸‰ã€æ¨¡å¼

## ã€1ã€‘`g`ï¼šå…¨å±€

```
'this is an\n ant good'.match(/an/g); // ["an", "an"]
```

## ã€2ã€‘`i`ï¼šä¸åŒºåˆ«å¤§å°å†™

```
'catCat'.match(/cat/gi); // ["cat", "Cat"]
```

## ã€3ã€‘`m`ï¼šå¤šè¡Œæ¨¡å¼

```
'test\nbbs'.match(/^b/gm); // ['b]
```

## ã€4ã€‘`s`ï¼šä½¿åœ†ç‚¹`.`èƒ½åŒ¹é…æ¢è¡Œç¬¦

```
// ä¸ä½¿ç”¨æ—¶ï¼š
"google\ntest".match(/google./g); // null

// ä½¿ç”¨æ—¶ï¼š
"google\ntest".match(/google./sg); // ["googleâ†µ"]
```

## ã€5ã€‘`u`ï¼šunicode ç¼–ç 

### ã€5.1ã€‘unicode ç¼–ç æœ‰å¤šå°‘å­—ç¬¦

å¤§å¤šæ•°æƒ…å†µæ˜¯ 1 ä¸ªå­—ç¬¦ï¼š

```
'\u0061' === 'a'; // true
```

ä½†æœ‰äº›ç‰¹æ®Šå­—å’Œè¡¨æƒ…æ–‡å­—å°±æ˜¯å¤šä¸ªå­—ç¬¦ï¼š

```
'\ud842\udfb7' === 'ğ ®·'; // true
'\ud83e\udd2a\u0020' === "ğŸ¤ª "; // true
```

### ã€5.2ã€‘ä½¿ç”¨

1 ä¸ªå­—ç¬¦çš„è¯ï¼Œä½¿ç”¨`u`å’Œä¸ä½¿ç”¨`u`æ²¡æœ‰åŒºåˆ«ï¼š

```
'äºº'.match(/^.$/g); // ["äºº"]
'äºº'.match(/^.$/gu); // ["äºº"]
```

å¤šä¸ªå­—ç¬¦éœ€è¦ä½¿ç”¨`u`æ‰èƒ½åŒ¹é…åˆ°ï¼š

```
'ğ ®·'.match(/^.$/g); // null
'ğ ®·'.match(/^.$/gu); // ["ğ ®·"]

'ğŸ¤ª'.match(/^.$/g); // null
'ğŸ¤ª'.match(/^.$/gu); // ["ğŸ¤ª"]
```

## ã€6ã€‘`y`ï¼šç²˜è¿

`y`ä¸`g`çš„åŒºåˆ«ï¼š

```
var s = 'aaa_aa_a';
var r1 = /a+/g;
var r2 = /a+/y;

r1.exec(s) // ["aaa"]
r2.exec(s) // ["aaa"]

r1.exec(s) // ["aa"]
r2.exec(s) // null
```

`y`è¦æ±‚å¿…é¡»ä»å‰©ä½™å­—ç¬¦ä¸²å¤´éƒ¨å¼€å§‹åŒ¹é…ï¼š

```
var s = 'aaa_aa_a';
var r = /a+_/y;

r.exec(s) // ["aaa_"]
r.exec(s) // ["aa_"]
```

`y`ä¸`g`è”ç”¨ï¼Œè¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼š

```
'a1a2a3'.match(/a\d/gy) // ["a1", "a2", "a3"]
```

## ã€7ã€‘å±æ€§

- `flags`ï¼šè¿”å›æ­£åˆ™çš„æ‰€æœ‰ä¿®é¥°ç¬¦
- `stricky`ï¼šè¿”å›æ˜¯å¦ç”¨äº†`y`ä¿®é¥°ç¬¦
- `unicode`ï¼šè¿”å›æ˜¯å¦ç”¨äº†`u`ä¿®é¥°ç¬¦

---

# å››ã€è¯­æ³•

## ã€1ã€‘æ™®é€šå­—ç¬¦

|     å­—ç¬¦      |                   æè¿°                   |                             ä¾‹å­                             |
| :-----------: | :--------------------------------------: | :----------------------------------------------------------: |
| `[ABC]`ä¸­æ‹¬å· |  [abc]è¡¨ç¤ºåŒ¹é… aã€bã€c ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦  |        `'google'.match(/[oe]/g); // ["o", "o", "e"]`         |
|   `[^ABC]`    |     åŒ¹é…**é™¤äº†**`[...]`ä¸­çš„æ‰€æœ‰å­—ç¬¦      |      `'google'.match(/[^aeiou]/g); // ["g", "g", "l"]`       |
|    `[A-Z]`    |               æ‰€æœ‰å¤§å†™å­—æ¯               |        `'ABC is first'.match(/[A-Z]+/g); // ["ABC"]`         |
|    `[a-z]`    |               æ‰€æœ‰å°å†™å­—æ¯               | `'abc is first'.match(/[a-z]+/g); // ["abc", "is", "first"]` |
|    `[0-9]`    |                 æ‰€æœ‰æ•°å­—                 |     `'010-12345'.match(/[0-9]+/g); // ["010", "12345"]`      |
|      `.`      | åŒ¹é…é™¤æ¢è¡Œç¬¦ï¼ˆ`\n\r`ï¼‰ä»¥å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ |              `'hi'.match(/./g); // ["h", "i"]`               |

## ã€2ã€‘éæ‰“å°å­—ç¬¦

| å­—ç¬¦ |                     æè¿°                     |                         ä¾‹å­                          |
| :--: | :------------------------------------------: | :---------------------------------------------------: |
| `\s` |                 æ‰€æœ‰ç©ºç™½å­—ç¬¦                 |           `'hi you'.match(/\s/g); // [" "]`           |
| `\S` |                æ‰€æœ‰éç©ºç™½å­—ç¬¦                | `'hi you'.match(/\S/g); // ["h", "i", "y", "o", "u"]` |
| `\w` | åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº`[a-zA-Z0-9_]` |       `'b_ 2'.match(/\w/g); // ["b", "_", "2"]`       |
| `\W` |                   é™¤äº†ä¸Šé¢                   |                           -                           |
| `\d` |                   æ‰€æœ‰æ•°å­—                   |   `'010-12345'.match(/\d+/g); // ["010", "12345"]`    |
| `\D` |                   é™¤äº†æ•°å­—                   |                           -                           |
| `\f` |                  åŒ¹é…æ¢é¡µç¬¦                  |                                                       |
| `\n` |                  åŒ¹é…æ¢è¡Œç¬¦                  |                                                       |
| `\r` |                  åŒ¹é…å›è½¦ç¬¦                  |                                                       |
| `\t` |                  åŒ¹é…åˆ¶è¡¨ç¬¦                  |                                                       |
| `\v` |                åŒ¹é…å‚ç›´åˆ¶è¡¨ç¬¦                |                        &nbsp;                         |

## ã€3ã€‘ç‰¹æ®Šå­—ç¬¦

|  å­—ç¬¦  |                æè¿°                 |                                    ä¾‹å­                                     |
| :----: | :---------------------------------: | :-------------------------------------------------------------------------: |
|  `$`   | è¡Œçš„ç»“æŸ<br>`\d$`è¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—ç»“æŸ |                 `/c$/g.test('abc'); // trueï¼ˆæ˜¯å¦ä»¥cç»“æŸï¼‰`                 |
|  `^`   | è¡Œçš„å¼€å¤´<br>`\d$`è¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—å¼€å¤´ |                 `/a$/g.test('abc'); // trueï¼ˆæ˜¯å¦ä»¥aå¼€å¤´ï¼‰`                 |
|  `()`  |                åˆ†ç»„                 | `/^(\d{3})-(\d{3,8})$/.exec('010-12345'); // ['010-12345', '010', '12345']` |
|  `[]`  |                èŒƒå›´                 |                            `[0-9]`ä»£è¡¨èŒƒå›´æ˜¯æ•°å­—                            |
|  `{}`  |              åŒ¹é…é•¿åº¦               |                           `{0,9}`ä»£è¡¨é•¿åº¦ 0-9 ä¸ª                            |
|  `*`   |        åŒ¹é…å‡ºç° 0 æ¬¡æˆ– N æ¬¡         |               `/a0*/g.test('a9'); // true(aå¼€å¤´ï¼Œ0å‡ºç°äº†0æ¬¡)`               |
|  `+`   |        åŒ¹é…å‡ºç° 1 æ¬¡æˆ– N æ¬¡         |              `/a0*/g.test('a9'); // false(aå¼€å¤´ï¼Œ0å‡ºç°äº†0æ¬¡)`               |
|  `?`   |        åŒ¹é…å‡ºç° 0 æ¬¡æˆ– 1 æ¬¡         |               `/a0?/g.test('a2'); // true(aå¼€å¤´ï¼Œ0å‡ºç°äº†0æ¬¡)`               |
|  `\`   |              ç‰¹æ®Šå­—ç¬¦               |              åŒ¹é…å¦‚`$`ä¹‹ç±»çš„å­—ç¬¦<br>`/\$/g.test('$'); // true`              |
| &#124; |                 æˆ–                  |           åŒ¹é… A æˆ– B<br>`'abc'.match(/aç«–çº¿b/g); // ["a", "b"]`            |

## ã€4ã€‘æ–­è¨€

|     åç§°     | è¯­æ³•  |          é‡Šä¹‰           |    å†™æ³•     |                        ä¾‹å­                         |
| :----------: | :---: | :---------------------: | :---------: | :-------------------------------------------------: |
|   å…ˆè¡Œæ–­è¨€   | `?=`  |  x åªæœ‰åœ¨ y å‰é¢æ‰åŒ¹é…  | `/x(?=y)/`  |   åªåŒ¹é…**åœ¨**ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—<br />`/\d+(?=%)/`    |
| å…ˆè¡Œå¦å®šæ–­è¨€ | `?!`  | x åªæœ‰ä¸åœ¨ y å‰é¢æ‰åŒ¹é… | `/x(?!y)/`  |  åªåŒ¹é…**ä¸åœ¨**ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—<br />`/\d+(?!=%)/`  |
|   åè¡Œæ–­è¨€   | `?<=` |  x åªæœ‰åœ¨ y åé¢æ‰åŒ¹é…  | `/(?<=y)x/` |  åªåŒ¹é…**åœ¨**ç¾å…ƒç¬¦å·ä¹‹åçš„æ•°å­—<br />`/(?<=$)\d+/`  |
| åè¡Œå¦å®šæ–­è¨€ | `?<!` | x åªæœ‰ä¸åœ¨ y åé¢æ‰åŒ¹é… | `/(?<!y)x/` | åªåŒ¹é…**ä¸åœ¨**ç¾å…ƒç¬¦å·ä¹‹åçš„æ•°å­—<br />`/(?<!$)\d+/` |

---

# äº”ã€æ›´å¤šç”¨æ³•

## ã€1ã€‘åˆ‡åˆ†å­—ç¬¦ä¸²

```
ä¸ç”¨æ—¶ï¼š

'a b  c'.split(' '); // ["a", "b", "", "c"]

ç”¨æ­£åˆ™ï¼š

'a b  c'.split(/\s+/); // ["a", "b", "c"]
```

## ã€2ã€‘åˆ†ç»„

```
var re = /^(\d{3})-(\d{3,8})$/;
re.exec('010-12345'); // ['010-12345', '010', '12345']
re.exec('010 12345'); // null
```

## ã€3ã€‘`replace`ï¼šæ›¿æ¢

```
'8'.replace(/\d/, '*'); // '*'
```

## ã€4ã€‘`$1`ï¼Œ`$2`ç»„

`$1`ï¼Œ`$2`åˆ†åˆ«ä»£è¡¨`()`é‡Œé¢çš„ç»„

ä¾‹å­ï¼š

- æ‰‹æœºå·è„±æ•

```
"18912341234".replace(/(\d{3})\d*(\d{4})/,'$1****$2'); // "189****1234"
```

- æ—¶é—´æ ¼å¼åŒ–

```
'2019-08-28'.replace(/(\d{4})\-(\d{2})\-(\d{2})/,"$1å¹´$2æœˆ$3æ—¥"); // "2019å¹´08æœˆ28æ—¥"
```

## ã€5ã€‘`search`ï¼šæœç´¢

```
'hello world 2'.search(/\d/); // 11ã€è¿”å›ä¸‹æ ‡ã€‘
```

---

# å…­ã€å¸¸ç”¨ä¾‹å­

## ã€1ã€‘æ˜¯å¦ç¾å…ƒæ ¼å¼

```
/^\$\d{1,3}(,\d{3})*(\.\d{2})/.test('$1,023,032.03'); // true
```

## ã€2ã€‘æ˜¯å¦é‚®ç®±

```
/^([\w+\.])+@(\w+)([.]\w+)+$/.test('238fwe@qq.com'); // true
```
